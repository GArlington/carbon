<?xml version="1.0" encoding="UTF-8" ?>

<package name="Authentication">

	<enum name="UserType" >
		<member name="Human" value="H" comment="Normal human user." />
		<member name="Virtual" value="V"  comment="System user that cannot login but is otherwise treated like a normal user." />
	</enum>

	<entity name="User" implements="Email,Audited, FlagActivation" comment="Defines a user of the system." >
		<member name="Fullname" type="text:128" constraint="required" comment="Full name, for display purpose only." />
		<member name="PasswordHash" type="text:256" constraint="required" comment="Password hash. The password itself is not stored." />
		<member name="ShowEmail" type="logical" default="true" comment="Allows system to display user's email to others." />
		<member name="DefaultRole" type="Role" comment="User's primary role if he his member of more than one." />
		<member name="UserType" type="UserType" comment="User type." />
	</entity>

	<entity name="Role" implements="FlagActivation" comment="Defines a security role. Roles are associated to permissions (see ACLs)." >
		<member name="Name" type="text:128" constraint="required" comment="Role name." />

		<unique name="UkRole" ref="Name" />
	</entity>

	<entity name="RoleMember" comment="Defines role membership." >
		<member name="Role" type="Role" constraint="required" />
		<member name="User" type="User" constraint="required" />

		<unique name="UkRoleMember" ref="Role,User" />
	</entity>

</package>